Yox={compare:function(b,c){function d(g){var h=0;for(var i in g)i!=null&&h++;return h}if(d(b)!=d(c))return false;for(var f in b){var a=b[f],e=c[f];if(typeof a!=typeof e)return false;if(a&&a.length&&a[0]!==undefined&&a[0].tagName){if(!e||e.length!=a.length||!e[0].tagName||e[0].tagName!=a[0].tagName)return false}else if(typeof a=="function"||typeof a=="object"){a=Yox.compare(a,e);if(!a)return a}else if(a!=e)return false}return true},dataRegex:{picasa:/http:\/\/(www.)?picasaweb\.google\..*/,flickr:/http:\/\/(www.)?flickr.com/, smugmug:/http:\/\/.*\.smugmug.com/},dataSources:[],fitImageSize:function(b,c,d,f){var a={width:b.width,height:b.height};if(!d&&b.width>c.width||d&&b.width!=c.width){a.height=Math.round(c.width/b.width*b.height);a.width=c.width}if(!f&&a.height>c.height){a.width=Math.round(c.height/a.height*a.width);a.height=c.height}else if(f&&a.height<c.height){a.height=c.height;a.width=Math.round(c.height/b.height*b.width)}return a},getDataSourceName:function(b){for(dataSourceIndex in Yox.dataRegex)if(b.match(Yox.dataRegex[dataSourceIndex]))return dataSourceIndex; return null},getPath:function(b){for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var f=c[d].src.match(b);if(f)return f[1]}return null},imageRegex:/.*\.(?:jpg|jpeg|gif|png)/i,queryToJson:function(b){b=b.split("&");var c={};jQuery.each(b,function(){var d=this.split("=");c[d[0]]=d[1]});return c},loadDataSource:function(b,c,d){var f;if(b.dataUrl)(f=Yox.getDataSourceName(b.dataUrl))&&$.extend(b,{dataSource:dataSourceIndex});b.dataSource&&!Yox.dataSources[f]?$.ajax({url:b.dataFolder+ b.dataSource+".js",async:false,dataType:"script",success:function(a){eval(a);eval("Yox.dataSources['"+b.dataSource+"'] = new yox_"+b.dataSource+"();");c(d)},error:function(a,e,g){console.log(a,e,g)}}):c(d)},Sprites:function(b,c,d){this.spritesImage=(new Image).src=c;var f=0;jQuery.each(b,function(a,e){e.top=f;f+=e.height});this.getSprite=function(a,e,g){return jQuery("<img/>",{src:d,alt:e,title:g,css:{width:b[a].width,height:b[a].height,"background-image":"url("+c+")","background-repeat":"no-repeat", "background-position":this.getBackgroundPosition(a,e)}})};this.getBackgroundPosition=function(a,e){return"-"+jQuery.inArray(e,b[a].sprites)*(b[a].width||0)+"px -"+b[a].top+"px"}},videoRegex:{youtube:/.*youtube.com\/watch.*(?:v=[^&]+).*/i,vimeo:/vimeo.com\/\d+/i,hulu:/hulu.com\/watch\//i,viddler:/viddler.com\//i,flickr:/.*flickr.com\/.*/i,myspace:/.*vids.myspace.com\/.*/i,qik:/qik.com/i,revision3:/revision3.com/i,dailymotion:/dailymotion.com/i,"5min":/.*5min\.com\/Video/i}};